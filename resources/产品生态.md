# NormCode 产品生态概览

> **序言智理（广州）科技有限公司** | NormCode.ai

---

## 公司愿景

构建**贴近人类思考直觉**的 AI 推理与 Agent 工作流基础设施，实现：

- **快速构建** - 降低 AI 工作流开发门槛
- **原生可调试** - 每一步都可追踪和检查
- **原生可审计** - 满足合规与法律要求
- **原生可迁移** - 与基础大模型解耦

> 让用户真正拥有对 AI 行为逻辑的**所有权**。

---

## 产品生态全景

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                               NormCode 产品生态                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   1. 核心层 (Core & Creation)                                                │
│   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐                     │
│   │   Language  │    │  Compiler   │    │    Agent    │                     │
│   │   序言码语言 │    │    编译器    │    │   流程代理   │                     │
│   │ 定义流程框架 │    │ 产生流程工具 │    │ 流程执行单元 │                     │
│   └─────────────┘    └─────────────┘    └─────────────┘                     │
│          │                  │                  │                             │
│          └──────────────────┼──────────────────┘                             │
│                             ▼                                               │
│   2. 调试与审计层 (Debug & Audit)                                            │
│                     ┌─────────────┐                                         │
│                     │   Canvas    │                                         │
│                     │    画布     │                                         │
│                     │ 调试/审计工具│                                         │
│                     └─────────────┘                                         │
│                             │                                               │
│                             ▼                                               │
│   3. 部署与交互层 (Runtime & Interaction)                                    │
│                     ┌─────────────┐    ┌─────────────┐                      │
│                     │   Server    │◀──▶│   Clients   │                      │
│                     │   服务器    │    │   客户端    │                      │
│                     │ 协作/存储环境 │    │  交互载体   │                      │
│                     └─────────────┘    └─────────────┘                      │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 六大产品组件详解

### 1. Language - 序言码语言
**定位**：定义流程的框架
- **状态**：已有论文（未发表，为知识产权做准备）。
- **描述**：一种半正式语言，用于声明式地描述 AI 工作流，提供上下文隔离与可审计性支持。

### 2. Compiler - 编译器
**定位**：产生流程的工具
- **状态**：已有工作流（由序言码驱动）。
- **开发模式**：使用 Cursor 快速持续开发修改的已验证工作模式。
- **描述**：将 NormCode 源码编译为可执行的计划（Plan），处理依赖解析与优化。

### 3. Agent - 流程代理协作 (Flow-Agent-Orchestration)
**定位**：实现流程工作的基本单元
- **状态**：已有可用 Python Package（闭源/未发表）。
- **Demo形态**：已实现 PPT 生成、文章 Deep Research、金融决策、序言码编译、画布对话机器人等任务。

### 4. Canvas - 画布
**定位**：调试/审计流程的工具
- **状态**：已有 Demo。
- **形态**：目前为独立 Web 驱动的客户端，后期向 VSCode / Cursor Integration 发展。
- **描述**：提供图形化计划展示、实时执行监控与交互式调试能力。

### 5. Server - 服务器
**定位**：流程和代理的储存、协作，与工作的特定环境
- **状态**：已有在 localhost 环境下测试过的 Demo。
- **能力**：提供流程的版本管理、代理的注册发现以及多用户协作支持。

### 6. Clients - 客户端
**定位**：特定流程的服务特定对象的交互载体
- **状态**：对 PPT-Agent 已经打造了特定 GUI-Client-Demo。
- **描述**：针对特定业务场景（如生成演示文稿、法律咨询）定制的终端用户界面。

---

## 三大核心价值

### 1. 数据隔离 (Context Isolation)

| 问题 | NormCode 解决方案 |
|------|------------------|
| 上下文污染 | 每个步骤只看到明确传入的数据 |
| LLM 幻觉 | 隔离减少无关信息干扰 |
| 错误传播 | 防止错误在步骤间扩散 |

### 2. 完全可审计 (Full Auditability)

- 每一步**接收什么**、**输出什么**完全可见
- 支持事后分析和调试
- 满足法律、医疗、金融等合规要求
- 完整的审计跟踪 (Audit Trail)

### 3. 依赖驱动执行 (Dependency-Driven Execution)

- **自动调度**：仅在输入准备就绪时运行推理
- **可中断**：支持暂停、恢复、分叉
- **持久化**：SQLite 检查点保存状态
- **长运行支持**：原生支持复杂工作流

---

## 技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                    用户界面层 (Canvas App)                   │
│           React 前端 - 可视化调试、图形编辑、执行监控          │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                   API 服务层 (FastAPI)                       │
│      13个路由器：执行、编辑、检查点、智能体、聊天等            │
│                   WebSocket 实时反馈                         │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                   Canvas 集成层                              │
│       门面 (Facades) | 能力 (Faculties) | 视角 (Perspectives)│
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                NormCode 执行引擎 (infra)                     │
│  ┌──────────┬──────────┬──────────┬──────────┬──────────┐   │
│  │  _agent  │  _core   │ _orchest │ _states  │ _syntax  │   │
│  │ 智能体框架│ 数据结构 │ 编排器   │ 状态管理 │ 语言解析 │   │
│  └──────────┴──────────┴──────────┴──────────┴──────────┘   │
└────────────────────────────┬────────────────────────────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                      外部集成层                              │
│   LLM 提供商 (OpenAI, Anthropic, DashScope) | SQLite | 文件系统│
└─────────────────────────────────────────────────────────────┘
```

---

## 三层对齐栈

```
┌────────────────────────────────────────┐
│     NormCode (权限层)                   │
│     人类与 AI 的半正式契约              │
├────────────────────────────────────────┤
│     共享工作区 (执行层)                 │
│     数据、工具、任务约束                │
├────────────────────────────────────────┤
│     基础模型 (理解层)                   │
│     通用推理和生成                      │
└────────────────────────────────────────┘
```

---

## 商业模式

### To-B 企业/行业

| 模式 | 描述 |
|------|------|
| 定制化智能体 | 使用 NormCode 开发定制化推理流 |
| 中间层基础设施 | 提供 SDK / Engine |

**核心行业**：

| 行业 | 核心需求 |
|------|----------|
| 金融 | 合规风控、可审计决策 |
| 半导体 | 复杂流程自动化 |
| 教育 | 可解释性 AI |
| 企业组织 | 办公流程智能化 |

### To-C 开发者/极客

| 方向 | 对标/替代/集合 |
|------|----------|
| AI 开发工具 | Claude Code / Cursor / Coze / Dify |
| Agent 平台 | HuggingFace / GPT Store / AgentHub |

---

## 竞争优势

| 维度 | NormCode 优势 |
|------|--------------|
| 与大模型解耦 | 不绑定特定 LLM，自由切换 |
| 行为逻辑所有权 | 用户拥有完整控制权 |
| 原生可审计 | 满足监管合规要求 |
| 可调试性 | 专业级调试工具 |
| 可迁移性 | 跨平台、跨模型迁移 |

---

## 适用场景

### 推荐使用

| 场景 | 原因 |
|------|------|
| 多步骤工作流 (5+ LLM调用) | 数据隔离和可审计性收益最大 |
| 可审计 AI 系统 (法律、医疗、金融) | 必须证明每一步看到的内容 |
| 长运行、可恢复工作流 | 内置检查点系统 |
| 复杂决策链 | 依赖驱动调度 |
| 持续开发与迭代 | 流程可复用、可调试、可持续优化 |

### 不推荐使用

| 场景 | 原因 |
|------|------|
| 一次性任务 | 不复用的流程，无需投入结构化成本 |
| 无需持续调试 | 不需要追踪、审计或迭代优化的场景 |
| 简单单轮对话 | 不涉及多步推理，直接调用模型更简单 |

---

## 项目规模

| 指标 | 数值 |
|------|------|
| Python 文件数 | 1,185 |
| TypeScript 文件数 | 1,117 |
| infra 代码行数 | ~10,755 |
| Canvas 后端代码行数 | ~24,629 |
| API 路由器数 | 13 |
| 工作示例数 | 70+ |

---

## 快速启动

```bash
# 启动 Canvas 应用（推荐）
python launch_canvas.py              # 开发模式
python launch_canvas.py --prod       # 生产模式

# 命令行编排
python cli_orchestrator.py run --concepts concepts.json --inferences inferences.json
python cli_orchestrator.py resume --run-id <UUID>
python cli_orchestrator.py fork --from-run <UUID>
```

---

## 文档资源

| 目录 | 内容 |
|------|------|
| `documentation/current/1_intro/` | 概览和快速开始 |
| `documentation/current/2_grammar/` | NCD 语法参考 |
| `documentation/current/3_execution/` | 执行模型详解 |
| `documentation/current/4_compilation/` | 编译流程 |
| `documentation/current/5_tools/` | Canvas 应用指南 |
| `infra/examples/` | 70+ 工作示例 |

---

## LLM 支持

- **OpenAI** (GPT-4, GPT-3.5)
- **Anthropic** (Claude)
- **DashScope** (阿里通义)

配置文件：`settings.yaml`

---

## 总结

NormCode 产品生态为构建**企业级可审计 AI 系统**提供完整解决方案：

| 组件 | 功能 |
|------|------|
| Language | 序言码语言 - 定义流程框架 |
| Compiler | 编译器 - 产生可执行流程 |
| Canvas | 画布 - 调试与审计工具 |
| Agent | 流程代理 - 执行基本单元 |
| Server | 服务器 - 协作与工作环境 |
| Clients | 客户端 - 特定交互载体 |

**核心理念**：让用户真正拥有对 AI 行为逻辑的所有权，通过与基础大模型解耦，实现快速构建、原生可调试、可审计与可迁移的 AI 工作流。
