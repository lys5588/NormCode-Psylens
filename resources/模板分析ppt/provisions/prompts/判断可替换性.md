# 判断可替换性

你是一位PPT模板分析专家。基于已分析的页面意图，判断每个元素是否可以被用户内容替换。

## 输入

### 页面原始数据
<page_data>
$input_1
</page_data>

页面原始数据包含 `index` 字段，表示这是模板的第几页（从0开始）。**你必须在输出中原样复制这个 index 值！**

### 结构特征
<structure_features>
$input_2
</structure_features>

### 页面意图（已分析）
<page_intent>
$input_3
</page_intent>

页面意图包含：
- `page_intent`: 页面整体意图
- `content_blocks`: 内容块及其元素角色
- `standalone_elements`: 独立元素及其角色
- `best_for`: 适合的使用场景

## 任务

**基于意图判断可替换性**

核心逻辑：知道了一个元素的**角色和意图**后，判断它是否应该被用户内容替换。

**⚠️ 重要：输出的 `index` 必须直接从 `页面原始数据` 中复制！** 页面原始数据的 `index` 字段告诉你这是第几页，你必须原样输出，不要修改。

## 判断原则

### 可替换元素（用户需要填入自己的内容）

| 角色 | 判断理由 | 内容类型建议 |
|-----|---------|------------|
| **块标题** | 用户需要填入自己的要点标题 | 关键词/短语 |
| **块说明** | 用户需要填入详细解释 | 1-2句话 |
| **页面标题** | 用户需要填入页面主题 | 短语 |
| **页面副标题** | 用户需要填入补充说明 | 句子 |
| **正文内容** | 用户需要填入主要内容 | 段落 |

### 不可替换元素（保持原样的设计元素）

| 角色 | 判断理由 |
|-----|---------|
| **所有图片** ⚠️ | **图片一律不替换** - 包括背景图、装饰图、插图等 |
| **编号装饰** | 01/02/03 是设计的一部分，提供视觉结构 |
| **装饰图形** | 美化元素，不是内容 |
| **Logo/图标** | 品牌或视觉标识 |
| **分隔线** | 结构性元素 |

**⚠️ 重要：我们只替换文本元素，不替换任何图片！**

### 判断流程

```
1. 首先检查元素类型：如果是图片 → 直接标记为固定（不替换任何图片）
2. 如果是文本元素，获取元素的角色（从页面意图分析）
3. 如果角色是"内容"性质（标题、说明、正文）→ 可替换
4. 如果角色是"设计/装饰"性质（编号、装饰文字）→ 固定
5. 对可替换元素，分析适合填入什么类型的内容
```

## 输出格式

返回带有 `thinking` 和 `result` 字段的 JSON：

```json
{
  "thinking": "根据页面意图分析，这是三栏内容页。01/02/03是编号装饰应固定，各块的标题和说明应可替换...",
  "result": {
    "index": 5,  // ⚠️ 必须从输入的页面原始数据中复制，不要修改！
    
    "page_intent": "三栏内容页",
    "narrative_structure": "并列关系",
    "best_for": ["展示三个核心特点", "流程步骤说明"],
    
    "substitutable_elements": [
      {
        "shape_index": 10,
        "role": "页面标题",
        "intent": "概括整页主题",
        "content_type": "短语",
        "constraints": {
          "max_chars": 20,
          "style_hint": "简洁有力"
        },
        "current_text": "CASE INSPIRATION"
      },
      {
        "shape_index": 4,
        "role": "Block1标题",
        "intent": "第一个要点的核心表述",
        "belongs_to_block": 1,
        "content_type": "关键词",
        "constraints": {
          "max_chars": 15
        },
        "current_text": "First Point"
      },
      {
        "shape_index": 7,
        "role": "Block1说明",
        "intent": "第一个要点的详细解释",
        "belongs_to_block": 1,
        "content_type": "1-2句话",
        "constraints": {
          "max_chars": 100
        },
        "current_text": "Description text here..."
      },
      {
        "shape_index": 5,
        "role": "Block2标题",
        "intent": "第二个要点的核心表述",
        "belongs_to_block": 2,
        "content_type": "关键词",
        "constraints": {
          "max_chars": 15
        },
        "current_text": "Second Point"
      },
      {
        "shape_index": 8,
        "role": "Block2说明",
        "intent": "第二个要点的详细解释",
        "belongs_to_block": 2,
        "content_type": "1-2句话",
        "constraints": {
          "max_chars": 100
        },
        "current_text": "Description text here..."
      },
      {
        "shape_index": 6,
        "role": "Block3标题",
        "intent": "第三个要点的核心表述",
        "belongs_to_block": 3,
        "content_type": "关键词",
        "constraints": {
          "max_chars": 15
        },
        "current_text": "Third Point"
      },
      {
        "shape_index": 9,
        "role": "Block3说明",
        "intent": "第三个要点的详细解释",
        "belongs_to_block": 3,
        "content_type": "1-2句话",
        "constraints": {
          "max_chars": 100
        },
        "current_text": "Description text here..."
      }
    ],
    
    "fixed_elements": [
      {
        "shape_index": 0,
        "type": "picture",
        "reason": "背景图片 - 模板视觉基础"
      },
      {
        "shape_index": 1,
        "type": "text",
        "text": "01",
        "reason": "编号装饰 - 设计元素，提供视觉结构"
      },
      {
        "shape_index": 2,
        "type": "text",
        "text": "02",
        "reason": "编号装饰 - 设计元素，提供视觉结构"
      },
      {
        "shape_index": 3,
        "type": "text",
        "text": "03",
        "reason": "编号装饰 - 设计元素，提供视觉结构"
      }
    ],
    
    "usage_notes": "适合需要并列展示3个概念的场景。编号(01/02/03)保持不变，用户只需填入各块的标题和说明。"
  }
}
```

## 关键判断示例

### 示例1：编号是否可替换？

```
元素: "01"
角色: 编号装饰（从页面意图得知）
判断: 固定
理由: 它是设计的一部分，提供视觉结构，不是用户需要修改的内容
```

### 示例2：标题是否可替换？

```
元素: "CASE INSPIRATION"
角色: 页面标题（从页面意图得知）
判断: 可替换
理由: 用户需要填入自己的页面主题
内容类型: 短语，最多20字符
```

### 示例3：图片是否可替换？

```
元素: 任何类型的图片（背景图、插图、装饰图等）
判断: 固定 ⚠️
理由: 我们只替换文本，不替换任何图片
```

### 示例4：边界情况 - 装饰性文字

```
元素: "EDUCATION & LEARNING"（小字，在角落）
需要判断: 这是装饰标语还是用户应该修改的内容？
如果是模板主题标语 → 固定
如果是占位符内容 → 可替换
```

## 输出要点

1. **⚠️ index 必须从输入复制** - 直接从 `页面原始数据` 的 `index` 字段复制，不要猜测或修改！
2. **shape_index 必须准确** - 这是后续替换的定位依据
3. **current_text 必须正确** - 用于验证和参考
4. **constraints 要实用** - 帮助内容生成时控制长度和风格
5. **belongs_to_block 要标注** - 保持块内元素的关联性

## 重要说明

1. **只替换文本** ⚠️ - 图片一律不替换，只有文本元素才可能是可替换的
2. **基于意图判断** - 不是基于规则，而是基于"这个元素在页面叙事中的角色"
3. **意图优先** - 同样是文本，"编号01"和"要点标题"的可替换性完全不同
4. **实用导向** - 输出要能直接指导后续的内容填充
5. **边界要清晰** - 可替换/固定必须明确，不留模糊地带

**重要：** 你的响应必须是有效的JSON，且必须包含这两个顶级键（thinking 和 result）。

