<!-- Left Panel — Configuration -->
<div class="panel">
    <h2 class="panel-title">⚙️ 配置</h2>
    <div class="panel-content">
        <div class="server-config">
            <input type="text" id="serverUrl" value="http://localhost:8080" placeholder="服务器地址">
            <button class="btn btn-outline btn-sm" onclick="connect()">连接</button>
        </div>

        <div class="form-group">
            <label>计划方案</label>
            <select id="planSelect" disabled>
                <option value="">-- 请先连接服务器 --</option>
            </select>
        </div>

        <div class="form-group">
            <label>LLM 模型</label>
            <select id="llmModel">
                <option value="qwen-plus">Qwen Plus</option>
                <option value="qwen-turbo">Qwen Turbo</option>
            </select>
        </div>

        <!-- Basic Inputs -->
        <div class="section open">
            <div class="section-header" onclick="toggleSection(this)">
                <span>📝 基本输入 <span id="inputsStatus" class="inputs-status"></span></span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="section-content">
                <div class="form-group">
                    <label>主题 *</label>
                    <input type="text" id="topic" value="机器学习基础" onchange="markInputsModified()">
                </div>
                <div class="form-group">
                    <label>目标受众</label>
                    <input type="text" id="audience" value="技术初学者" onchange="markInputsModified()">
                </div>
                <div class="form-group">
                    <label>期望长度</label>
                    <input type="text" id="length" value="包括标题和问答在内的6张幻灯片" onchange="markInputsModified()">
                </div>
                <div class="section-actions">
                    <button class="btn btn-primary btn-sm" id="saveInputsBtn" onclick="saveInputsToBackend()">
                        ✓ 确定保存输入
                    </button>
                </div>
            </div>
        </div>

        <!-- Content References -->
        <div class="section open" id="contentSection">
            <div class="section-header" onclick="toggleSection(this)">
                <span>📄 内容参考 <span id="contentCount" class="ref-count"></span></span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="section-content">
                <div class="uploaded-files" id="contentFiles"></div>
                <div class="file-upload-area"
                     ondrop="handleDrop(event, 'content')"
                     ondragover="handleDragOver(event)"
                     ondragleave="handleDragLeave(event)"
                     onclick="document.getElementById('contentInput').click()">
                    <input type="file" id="contentInput" multiple hidden onchange="handleFiles(event, 'content')">
                    ➕ 添加内容文件<br>
                    <small class="muted">.md, .txt, .json</small>
                </div>
            </div>
        </div>

        <!-- Template References -->
        <div class="section open" id="templateSection">
            <div class="section-header" onclick="toggleSection(this)">
                <span>🖼️ 幻灯片模板 <span id="templateCount" class="ref-count"></span></span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="section-content">
                <div class="uploaded-files" id="templateFiles"></div>
                <div class="file-upload-area"
                     ondrop="handleDrop(event, 'template')"
                     ondragover="handleDragOver(event)"
                     ondragleave="handleDragLeave(event)"
                     onclick="document.getElementById('templateInput').click()">
                    <input type="file" id="templateInput" multiple hidden onchange="handleFiles(event, 'template')">
                    ➕ 添加HTML模板<br>
                    <small class="muted">.html</small>
                </div>
            </div>
        </div>

        <!-- Style Guide References -->
        <div class="section open" id="styleSection">
            <div class="section-header" onclick="toggleSection(this)">
                <span>🎨 样式指南 <span id="styleCount" class="ref-count"></span></span>
                <span class="section-toggle">▶</span>
            </div>
            <div class="section-content">
                <div class="uploaded-files" id="styleFiles"></div>
                <div class="file-upload-area"
                     ondrop="handleDrop(event, 'style')"
                     ondragover="handleDragOver(event)"
                     ondragleave="handleDragLeave(event)"
                     onclick="document.getElementById('styleInput').click()">
                    <input type="file" id="styleInput" multiple hidden onchange="handleFiles(event, 'style')">
                    ➕ 添加样式指南<br>
                    <small class="muted">.css, .md, .txt</small>
                </div>
            </div>
        </div>

        <div class="panel-footer">
            <button class="btn btn-outline btn-block" onclick="previewInputs()">👁️ 预览输入</button>
            <button class="btn btn-primary" id="startBtn" onclick="startRun()" disabled>🚀 开始生成</button>
        </div>
    </div>
</div>

